<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Select Your Car Seat</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      --primary: #ff3600;
      --primary-dark: #d42d00;
      --bg: #f4f4f6;
      --seat-free: rgba(255, 255, 255, 0.6);
      --seat-selected: #ff3600;
      --seat-booked: #555;
      --text-dark: #222;
      --text-muted: #666;
      --card-bg: #ffffff;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: var(--bg);
      color: var(--text-dark);
      display: flex;
      justify-content: center;
    }

    .page {
      width: 100%;
      max-width: 1200px;
      padding: 0 16px 40px;
    }

    /* HERO BANNER */
    .hero {
      position: relative;
      border-radius: 32px;
      overflow: hidden;
      margin: 16px 0 24px;
    }

    .hero img {
      width: 100%;
      height: 260px;
      object-fit: cover;
      display: block;
    }

    .hero-title {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: clamp(34px, 5vw, 58px);
      font-weight: 800;
      color: #fff;
      text-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
    }

    /* 2-COLUMN LAYOUT */
    .main-card {
      margin-top: 8px;
      background: transparent;
      display: grid;
      grid-template-columns: minmax(0, 0.4fr) minmax(0, 0.6fr);
      gap: 24px;
      align-items: stretch;
    }

    .driver-card,
    .car-card {
      background: var(--card-bg);
      border-radius: 28px;
      box-shadow: 0 22px 45px rgba(15, 23, 42, 0.12);
      padding: 22px 24px 26px;
    }

    /* DRIVER CARD */
    .driver-label {
      font-size: 12px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--text-muted);
      margin-bottom: 6px;
      font-weight: 600;
    }

    .driver-header {
      display: flex;
      gap: 14px;
      align-items: center;
      margin-bottom: 12px;
    }

    .driver-photo {
      width: 54px;
      height: 54px;
      border-radius: 50%;
      overflow: hidden;
      flex-shrink: 0;
      background: #eee;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .driver-photo img {
      max-width: 100%;
      max-height: 100%;
      display: block;
    }

    .driver-name {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .driver-meta {
      font-size: 13px;
      color: var(--text-muted);
    }

    .driver-meta span + span::before {
      content: "•";
      margin: 0 6px;
    }

    .driver-bio {
      margin-top: 10px;
      font-size: 14px;
      line-height: 1.45;
      color: var(--text-muted);
    }

    /* CAR CARD */
    .car-card h2 {
      margin: 0 0 4px;
      font-size: 20px;
    }

    .car-card .hint {
      margin: 0 0 12px;
      font-size: 13px;
      color: var(--text-muted);
    }

    .car-wrapper {
      position: relative;
      margin: 10px auto 12px;
      max-width: 320px;
      border-radius: 26px;
      overflow: hidden;
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.25);
      background: #000;
    }

    .car-image {
      width: 100%;
      display: block;
      max-height: 520px;
      object-fit: cover;
    }

    /* SEAT PILL STYLES */
    .seat-pill,
    .driver-pill {
      position: absolute;
      transform: translate(-50%, -50%);
      padding: 6px 14px;
      border-radius: 999px;
      border: 1px solid rgba(0, 0, 0, 0.18);
      background: var(--seat-free);
      backdrop-filter: blur(12px);
      box-shadow: 0 8px 16px rgba(15, 23, 42, 0.25);
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 2px;
      font-size: 11px;
      cursor: pointer;
      color: #111;
      white-space: nowrap;
      user-select: none;
    }

    .seat-pill span {
      pointer-events: none;
    }

    .seat-pill .seat-code {
      font-weight: 700;
      font-size: 12px;
    }

    .seat-pill .seat-caption {
      text-transform: uppercase;
      letter-spacing: 0.12em;
      font-size: 9px;
    }

    .seat-pill.selected {
      background: var(--seat-selected);
      border-color: var(--seat-selected);
      color: #fff;
      box-shadow: 0 10px 30px rgba(244, 63, 94, 0.55);
    }

    .seat-pill.booked {
      background: rgba(0, 0, 0, 0.78);
      color: #f5f5f5;
      border-color: rgba(0, 0, 0, 0.85);
      cursor: not-allowed;
      box-shadow: none;
    }

    .seat-pill .booked-overlay {
      font-size: 9px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      opacity: 0.8;
    }

    /* DRIVER (non-clickable) */
    .driver-pill {
      padding: 5px 10px;
      background: rgba(0, 0, 0, 0.9);
      color: #fff;
      border-color: rgba(0, 0, 0, 0.9);
      cursor: default;
      gap: 4px;
    }

    .driver-pill .driver-text {
      font-size: 10px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
    }

    .driver-pill .driver-icon-mini {
      width: 18px;
      height: 18px;
      filter: invert(1);
    }

    /* POSITIONS (tweak visually if needed) */
    .driver-pill {
      top: 39%;
      left: 43%;
    }

    .seat-pill[data-seat-id="VIP"] {
      top: 39%;
      left: 62%;
    }

    .seat-pill[data-seat-id="BL"] {
      top: 64%;
      left: 45%;
    }

    .seat-pill[data-seat-id="BR"] {
      top: 64%;
      left: 60%;
    }

    /* STATUS + LEGEND + BUTTON */
    .status {
      margin-top: 6px;
      font-size: 13px;
      color: var(--text-muted);
    }

    .status strong {
      color: var(--primary-dark);
    }

    .legend {
      display: flex;
      gap: 16px;
      justify-content: flex-start;
      font-size: 12px;
      margin-top: 10px;
      color: var(--text-muted);
    }

    .legend-item {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .legend-dot {
      width: 11px;
      height: 11px;
      border-radius: 50%;
      border: 2px solid #999;
    }

    .legend-dot.free {
      background: var(--seat-free);
    }

    .legend-dot.selected {
      background: var(--seat-selected);
      border-color: var(--seat-selected);
    }

    .legend-dot.booked {
      background: #555;
      border-color: #555;
    }

    .btn {
      margin-top: 16px;
      padding: 13px 30px;
      border-radius: 999px;
      border: none;
      background: var(--primary);
      color: #fff;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 14px 36px rgba(248, 113, 113, 0.45);
      transition: 0.16s ease all;
    }

    .btn:hover:not(:disabled) {
      background: var(--primary-dark);
      transform: translateY(-1px);
    }

    .btn:disabled {
      background: #c2c2c7;
      box-shadow: none;
      cursor: not-allowed;
    }

    .message {
      margin-top: 10px;
      font-size: 13px;
    }

    .message.ok {
      color: #059669;
    }

    .message.error {
      color: #dc2626;
    }

    /* RESPONSIVE */
    @media (max-width: 900px) {
      .main-card {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 600px) {
      .car-wrapper {
        max-width: 260px;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <!-- HERO -->
    <header class="hero">
      <img src="banner.jpg" alt="Front view of Arteon banner" />
      <div class="hero-title">Select Your Car Seat</div>
    </header>

    <!-- DRIVER + CAR BOOKING -->
    <section class="main-card">
      <!-- LEFT: DRIVER INFO -->
      <article class="driver-card">
        <div class="driver-label">Your driver</div>
        <div class="driver-header">
          <div class="driver-photo">
            <!-- use your real photo if you want -->
            <img src="driver-wheel.png" alt="Photo of your driver" />
          </div>
          <div>
            <div class="driver-name">Aleš Krajina</div>
            <div class="driver-meta">
              <span>4.9 ★ rating</span>
              <span>120+ rides</span>
              <span>Non-smoker</span>
            </div>
          </div>
        </div>
        <p class="driver-bio">
          Czech guy in Switzerland, driving a graphite-silver Arteon R-Line.
          I like mountains, good music and making sure your ride is safe, on time
          and comfortable.
        </p>
      </article>

      <!-- RIGHT: CAR SEAT BOOKING -->
      <article class="car-card" aria-label="Seat selection in the car">
        <h2>Choose your place in the Arteon</h2>
        <p class="hint">Tap on a seat inside the car to reserve your spot.</p>

        <div class="car-wrapper">
          <img
            src="car-top-vertical.jpg"
            class="car-image"
            alt="Top-down view of the car"
          />

          <!-- DRIVER (non-bookable) -->
          <div class="driver-pill">
            <img
              src="driver-wheel.png"
              alt="Driver"
              class="driver-icon-mini"
            />
            <span class="driver-text">Driver</span>
          </div>

          <!-- VIP FRONT PASSENGER -->
          <button
            type="button"
            class="seat-pill"
            data-seat-id="VIP"
            aria-label="VIP front passenger seat"
          >
            <span class="seat-code">VIP</span>
            <span class="seat-caption">Co-pilot</span>
            <span class="booked-overlay"></span>
          </button>

          <!-- BACK LEFT -->
          <button
            type="button"
            class="seat-pill"
            data-seat-id="BL"
            aria-label="Back left seat"
          >
            <span class="seat-code">BL</span>
            <span class="seat-caption">Esteemed</span>
            <span class="booked-overlay"></span>
          </button>

          <!-- BACK RIGHT -->
          <button
            type="button"
            class="seat-pill"
            data-seat-id="BR"
            aria-label="Back right seat"
          >
            <span class="seat-code">BR</span>
            <span class="seat-caption">Esteemed</span>
            <span class="booked-overlay"></span>
          </button>
        </div>

        <div id="seatStatus" class="status">
          Loading seat status…
        </div>

        <div class="legend" aria-hidden="true">
          <div class="legend-item">
            <span class="legend-dot free"></span> Free
          </div>
          <div class="legend-item">
            <span class="legend-dot selected"></span> Selected
          </div>
          <div class="legend-item">
            <span class="legend-dot booked"></span> Booked
          </div>
        </div>

        <button id="confirmBtn" class="btn" disabled>
          Confirm Booking
        </button>
        <div id="message" class="message"></div>
      </article>
    </section>
  </div>

  <script>
    // --- CONFIG ----------------------------------------------------
    const SEATS = ["VIP", "BL", "BR"]; // driver is not bookable
    const STORAGE_KEY = "arteonSeatBookings_v1";

    let seatStates = {}; // { VIP: 'free' | 'booked', ... }
    let selectedSeat = null;

    function loadSeatStates() {
      try {
        const saved = localStorage.getItem(STORAGE_KEY);
        if (saved) {
          const parsed = JSON.parse(saved);
          if (parsed && typeof parsed === "object") {
            seatStates = parsed;
          }
        }
      } catch (e) {
        console.warn("Could not read seat states from localStorage:", e);
      }

      // default all to free if missing
      SEATS.forEach((id) => {
        if (!seatStates[id]) seatStates[id] = "free";
      });
    }

    function saveSeatStates() {
      try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(seatStates));
      } catch (e) {
        console.warn("Could not save seat states:", e);
      }
    }

    function updateUI() {
      const seatStatusEl = document.getElementById("seatStatus");
      const confirmBtn = document.getElementById("confirmBtn");
      const messageEl = document.getElementById("message");

      // Update pill classes
      SEATS.forEach((id) => {
        const pill = document.querySelector('.seat-pill[data-seat-id="' + id + '"]');
        if (!pill) return;

        pill.classList.remove("selected", "booked");
        pill.querySelector(".booked-overlay").textContent = "";

        if (seatStates[id] === "booked") {
          pill.classList.add("booked");
          pill.querySelector(".booked-overlay").textContent = "BOOKED";
        } else if (id === selectedSeat) {
          pill.classList.add("selected");
        }
      });

      // Status text
      const bookedCount = SEATS.filter((id) => seatStates[id] === "booked").length;
      const freeCount = SEATS.length - bookedCount;

      seatStatusEl.innerHTML =
        "Free seats: <strong>" +
        freeCount +
        "</strong> · Booked: <strong>" +
        bookedCount +
        "</strong> · Selected: " +
        (selectedSeat ? "<strong>" + selectedSeat + "</strong>" : "None");

      // Button
      confirmBtn.disabled = !selectedSeat;

      // Clear transient message on render
      messageEl.textContent = "";
      messageEl.className = "message";
    }

    function handleSeatClick(evt) {
      const pill = evt.currentTarget;
      const id = pill.getAttribute("data-seat-id");
      if (!id) return;

      if (seatStates[id] === "booked") {
        // Can't select booked seat
        selectedSeat = null;
      } else {
        // Toggle selection
        selectedSeat = selectedSeat === id ? null : id;
      }
      updateUI();
    }

    function handleConfirm() {
      const messageEl = document.getElementById("message");
      if (!selectedSeat) {
        messageEl.textContent = "Please select a seat first.";
        messageEl.className = "message error";
        return;
      }

      seatStates[selectedSeat] = "booked";
      saveSeatStates();

      messageEl.textContent =
        "Great, your seat (" + selectedSeat + ") is now booked.";
      messageEl.className = "message ok";

      selectedSeat = null;
      updateUI();
    }

    // INIT
    document.addEventListener("DOMContentLoaded", () => {
      loadSeatStates();

      // Attach handlers
      SEATS.forEach((id) => {
        const pill = document.querySelector(
          '.seat-pill[data-seat-id="' + id + '"]'
        );
        if (pill) {
          pill.addEventListener("click", handleSeatClick);
        }
      });

      document
        .getElementById("confirmBtn")
        .addEventListener("click", handleConfirm);

      updateUI();
    });
  </script>
</body>
</html>
